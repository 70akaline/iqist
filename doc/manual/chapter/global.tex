%-------------------------------------------------------------------------
% package manager
%-------------------------------------------------------------------------

% page layout
\usepackage[a4paper,top=4.0cm,textheight=22.0cm,textwidth=16.0cm]{geometry}
\usepackage{fancyhdr,indentfirst,pdflscape,array,listings,longtable,titlesec}

% hyperlinks
\usepackage[xetex,colorlinks=true,linkcolor=purple,anchorcolor=blue,citecolor=green]{hyperref}

% reference
\usepackage[sort,super,comma,compress]{natbib}

% figure
\usepackage{graphicx,tikz,color}
\usetikzlibrary{snakes,arrows,mindmap,automata}

% math
\usepackage{textcomp,amsmath,amssymb,mathrsfs,marvosym,wasysym,braket}

% font
\usepackage{fontspec,xunicode}

%-------------------------------------------------------------------------
% font style
%-------------------------------------------------------------------------

% need fontspec package support
\setmainfont{Times}
\setmonofont{Lucida Sans Typewriter}

%-------------------------------------------------------------------------
% page format
%-------------------------------------------------------------------------

% define header and footer
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{\emph{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{\leftmark}
\fancyhead[LO]{\rightmark}
%\fancyfoot[LE,RO]{by lihuang}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\fancypagestyle{plain}{
 	\fancyhf{}
	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0pt}
}

% redefine \clearpage
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
    \hbox{}
    \thispagestyle{plain}
    \newpage
    \if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother \clearpage{\pagestyle{plain}\cleardoublepage}

%% define line spacing
\renewcommand{\baselinestretch}{1.5}
\renewcommand{\arraystretch}{1.5}

%-------------------------------------------------------------------------
% chapter format
%-------------------------------------------------------------------------

\titleformat{\chapter}[display]
  {\bfseries\Large}
  {\filleft \Huge Chapter {\thechapter}}
  {4ex}
  {\titlerule
   \vspace{2ex}%
   \filright}
  [\vspace{2ex}%
   \titlerule]

%-------------------------------------------------------------------------
% equation format
%-------------------------------------------------------------------------

\renewcommand{\theequation}{\thechapter.\arabic{equation}}
%\renewcommand{\theequation}{\thesection.\arabic{equation}}

%-------------------------------------------------------------------------
% figure format
%-------------------------------------------------------------------------

\renewcommand{\thefigure}{\thechapter.\arabic{figure}}
%\renewcommand{\thefigure}{\thesection.\arabic{figure}}

%-------------------------------------------------------------------------
% self-defined commands
%-------------------------------------------------------------------------

\newcommand{\iqist}{ {\color{red}$i$}{\color{cyan}QIST} }
\newcommand{\azalea}{ {\color{red} $\mathcal{A}$zalea} }
\newcommand{\gardenia}{ {\color{violet} $\mathcal{G}$ardenia} }
\newcommand{\narcissus}{ {\color{blue} $\mathcal{N}$arcissus} }
\newcommand{\begonia}{ {\color{green} $\mathcal{B}$egonia} }
\newcommand{\lavender}{ {\color{orange} $\mathcal{L}$avender} }
\newcommand{\pansy}{ {\color{olive} $\mathcal{P}$ansy} }
\newcommand{\manjushaka}{ {\color{cyan} $\mathcal{M}$anjushaka} }
\newcommand{\daisy}{ {\color{lime} $\mathcal{D}$aisy} }
\newcommand{\jasmine}{ {\color{brown} $\mathcal{J}$asmine} }
\newcommand{\hibiscus}{ {\color{magenta} $\mathcal{H}$ibiscus} }
